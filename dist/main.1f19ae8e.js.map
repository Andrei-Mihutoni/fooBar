{"version":3,"sources":["modules/db.mjs","modules/storage.mjs","modules/bartenders.mjs","main.js"],"names":["url","restDbUrl","restDbAPIKey","rootData","get","callback","fetch","then","response","json","data","prepareData","showData","post","dataToPost","numberOfPeople","queueLength","postData","JSON","stringify","method","headers","body","res","console","log","getBar","bar","getQueue","queue","getServing","serving","getBartenders","bartenders","getTaps","taps","getStorage","storage","getQueueLength","length","extended","init","document","querySelector","classList","contains","clearPreviousBeers","addBeers","storageArray","beer","addBeerTemplate","name","amount","srcTemplate","destination","beerName","beerNr","template","content","cloneNode","textContent","toggle","i","newBeer","createElement","src","appendChild","el","innerHTML","data2","updateBartenders","bartendersArray","servingArray","bartender","bartenderNr","indexOf","selectedBartender","status","remove","add","id","statusDetail","usingTap","db","setTimeout","updateComponents","setInterval"],"mappings":"AGAA,AHAA;;AGEA;;AACA;;AACA;;;;;;AAEA;AACA,ADNO,ADDP,IAAIwC,KCCYC,GDDJ,CCCL,CAAc/B,CDDN,GCCR,EAAoB2D,ADD3B,KCCO,EAA0B;ACQjCc,ADPI3D,ECOF,ADPEA,CCODpB,GAAH,CAAO+E,EAAE,ADPE,CCODxE,ADPEc,GAAR,CAAYf,IAAZ,EAAkB2D,CCOtB,IDPI;ACQJe,ADPId,AFFJ,ACCO,ECCHA,EFFEtE,GAAG,ECCOyC,CEQN,AHTE,CGSD4C,EFRJ,CAAc3E,ICCD,ADDb,CCCcA,CDDK,GCCN,EAAO2D,ECOjB,EAAmB,CDPT,CAAhB,CCOM,CAAV,cHTA;AGWAiB,ADRC,AFDD,ACAI9D,EAAAA,EDAEvB,KCAK,CAACwB,CESD,CAAC,CHTG,ACAX,CAAYf,EDAE,ECAd,MESc,kCHTlB,EAA8D;AGU1DyE,EAAAA,EAAE,CAAC/E,GAAH,CAAO+E,EAAE,CAACxE,WAAV;AACA0E,ADRJ,AFFA,ACCI,EESAA,EHVEnF,ECCCwC,GCCE4B,KDDM,CAAC3B,CDDE,EGUE,CHVC,MEErB,CAA0BjC,EDDnB,CAAuB,CCC9B,EAAgC2D,KAAhC,EAAsC,MFFtC,EAAgD,ACCzC,EAA2CzB,SAA3C,CAAqDC,QAArD,CAA8D,UAA9D,CAAH,EAA6E;AEUhF,ADRG,ADDIL,CEMG,EAGR,CFTKA,ECCA+B,CCKG,CAAX,IFNgB,GAAG,IAAX,ECCe,GAAG7D,IAAtB;AACA,AFFG,ACCF,GAFD,CDCOP,EEEHqE,GDAJhC,GDFe,GAAG,EAAf,ACEK,CCAQ,EDAL,CCAQ6B,IDAnB,CCAA;ACUJ,SAASgB,gBAAT,GAA4B;AACxBD,ADbkC,ADIlCtC,EESAsC,AFTAtC,UESU,CAAC,OFTO,CAAC,IESF,cFTC,CAAlB,KCAqByB,eAJa;ACc9BlC,ADd8B,AFE/B,ACGHU,EAAAA,EESIV,KHZQjC,CCGJ,CESG,AFTFM,CESG+B,AHZT,CAAapC,ECGR,CESJ,AFTJ,CESiB8E,EAAE,CAAC/C,CHZjB,EAAuB,OGYT,EAAb;AACAH,AHZJ3B,ACGH,EDHGA,EGYI2B,GHZC,CAACjC,GAAD,CAAL,CACKO,CGWS,CAACkC,EHZf,CACU,CGWN,CAAgB0C,EAAE,CAACnD,KHXZxB,QGWS,AHXV,EGWN,EAAmC2E,EAAE,CAACrD,UAAH,EAAnC;AACH,ADhBiC,AFIxB,GGSA,EAGP,GAHO,CAAV,EHTwBtB,QAAQ,CAACC,IAAT,EAAd;AGab,ADbG,AFAU,ACId,GDLI,EAEKF,IAFL,ACKKwC,CDHK,OCGd,CAAkBrC,EDHHA,ECGf,EDHc,ACGS,EDHC,8BEDiB;AAAA,AFE7BL,ACGR,IDHQA,ECGJ2C,ICLIyB,EFEQ,CAAC/D,IAAD,CAAR,ACGQ,CCLqB,EDKlBA,IAAnB;ACJI,AFEC,GAJL,OEEQgE,WAAW,GAAGH,eAAe,CAACI,OAAhB,CAAwBF,SAAxB,CAAlB;AACA,AFEP,ACAsB,UCFXG,iBAAiB,GAAGlC,QAAQ,CAACC,MDIrBK,OCJY,KDET,iBCF8CuB,eAAe,CAACI,OAAhB,CAAwBF,SAAxB,CAArC,EAAxB;ADEe;ACAf,AFAP,UEAUA,SAAS,CAACI,MAAV,IAAkB,SAArB,EAA+B;AAC3BD,ADDW,QCCXA,iBAAiB,CAACjC,aAAlB,CAAgC,SAAhC,EAA2CC,SAA3C,CAAqDkC,MAArD,CAA4D,MAA5D;AACH,AFAF,ACAH,OCFI,EFEQnE,IEAD,OFAR,CAAqBD,IAArB,EAA2B,6BCAD;ACCrBkE,AFARhE,ACD6B,EDC7BA,MEAQgE,EFAA,ACDA3B,CDCCvC,GCDoB,CDCrB,CAAR,SEAyB,CAACiC,aAAlB,CAAgC,SAAhC,EAA2CC,SAA3C,CAAqDmC,GAArD,CAAyD,MAAzD;AACH,AFAL,ACDI7B,MAAAA,eDCJ/C,ACDmB,CAAC,ODCZ,GAAGO,IAAX,KCDmB,EAAsB,kBAAtB,EAA0CuC,IAAI,CAACE,IAA/C,EAAqDF,IAAI,CAACG,MAA1D,EAAkEZ,QAAlE,CAAf;ADEP,ACDI;ACEG,ADNe,UCMZgC,YAAY,CAACE,WAAD,CAAf,EAA6B;AACzBE,AFFX,ACLsB,EDOvB,MEAYA,iBAAiB,CAACjC,aAAlB,CAAgC,yBAAhC,EAA2DiB,WAA3D,GAAyEY,YAAY,CAACE,WAAD,CAAZ,CAA0BM,EAAnG;AACAJ,ADRW,QCQXA,iBAAiB,CAACjC,aAAlB,CAAgC,oBAAhC,EAAsDC,SAAtD,CAAgEkC,MAAhE,CAAuE,QAAvE;AACH,AFDT,ACRuB,OCMf,EFECjE,IECM,AFDf,GAAe;AEEH+D,AFDR,ACTmB,MDSb9D,EECE8D,QFDQ,GAAG,MECM,CAACjC,aAAlB,CAAgC,oBAAhC,EAAsDC,SAAtD,CAAgEmC,GAAhE,CAAoE,QAApE;AACH,AFDDhE,ACLP,IDKOA,cAAc,EAAEC;AADD,GAAnB;AEII,AFAJ,ACNJ,MDMUC,GCNDiC,CCMEuB,IFAO,GAAGvD,EEAD,CAAC+D,CFAI,CAAC9D,ECN1B,CAAyBkC,MDMJ,CEAV,AFAyBvC,IEAC,ADNrC,EAAsCwC,IDMjB,CAAjB,MCNJ,EAAmDC,CCM3C,EAA+C,KDNvD,EAA6DC,MAA7D,EAAqEhB,QAArE,EAA8E;ACOlEoC,AFARtE,ACNA,EDMAA,ICNMmD,CDMD,CEAGmB,AFAF3E,MCNQ,GDMT,ACNYyC,EDMA,MEAQ,ADNA,CCMCC,ADNAA,aCMlB,ADNS,CCMuB,ADNAU,WAAvB,EAAoCK,OCM7C,ADNS,CAA4CC,CCMCf,QDN7C,CCMT,ADN+D,CCMCkC,GDNvD,CAAjB,ECMQ,CAAuE,QAAvE;AACH,AFAD1D,ACLJqC,EAAAA,EDKIrC,GEFA,GFEM,ACLF,CAACuB,CDKG,CEAD,KFDM,MCJjB,CAAuB,aAAvB,EAAsCiB,WAAtC,GAAoDJ,MAApD;ACMQoB,AFAJvD,ACLJoC,EAAAA,EDKIpC,IEAIuD,EDLA,CDKG,ACLFjC,EDKI,WCLb,CCKyB,ADLF,CCKGA,UDL1B,EAAoCiB,CCK5B,CAAgC,SDLxC,GAAkDL,QCK1C,ADLR,ECK8DX,SAAtD,CAAgEmC,GAAhE,CAAoE,QAApE;AACH,AFAG,sBAAgB,iCADX;AAEL,ACLR,MAAGvC,QAAH,EAAY,EDKQtC,YAFP;AEGT,AFAI,ACLJuD,IAAAA,MCKGgB,EDLK,CAAC9B,MCKG,CAACsC,GFAQ,GCLrB,CAAuB,KCKpB,IAA0B,IDL7B,EAAsCrC,ICKtC,EAAyC,GDLzC,CAAgDiB,MAAhD,CAAuD,QAAvD;ACMIe,AFJK,ACDTnB,IAAAA,CDDa,GEMTmB,IDLI,CAACjC,YCKY,CAACA,ADLtB,CAAuB,OAAvB,EAAgCC,GCK5B,CAAgC,KDLpC,CAA0CiB,MAA1C,CAAiD,QAAjD,ICKI,EAA2DjB,SAA3D,CAAqEkC,MAArE,CAA4E,QAA5E;AACAF,AFAJtD,ACLH,IDKGA,IEAIsD,AFAA,EAAE3D,eEAe,CAAC0B,aAAlB,CAAgC,8BAAhC,EAAgEiB,WAAhE,GAA8Ea,SAAS,CAACS,QAAxF;AACH,AFRY,GAAZ,CAAL,CASK3E,EEJD,EFLJ,CASU,GEDC,OFCDgB,GAAG;AEALqD,AFAK,ACLb,OAAI,CCKIA,GFASrD,ACLTuC,CAAC,EDKW,CAACrD,ACLX,CAAV,EAAYqD,CDKK,ACLJ,EDKA,CCLCN,GCKW,CAACb,EDL1B,EAAqBmB,CAAC,EAAtB,EAAyB,ICKjB,CAAgC,yBAAhC,EAA2DlB,SAA3D,CAAqEmC,GAArE,CAAyE,QAAzE;AACH,AFDQ,ACJT,GDLJ,EAUKxE,GCLGwD,CDLR,CAUU,KCLK,GAAGrB,EDKRhC,IAAI,ECLY,CAACsD,aAAT,CAAuB,KAAvB,CAAd;ACMH,AFDa,ACJVD,IAAAA,ODIcvC,ACJP,CAACyC,GAAR,GDIqB,ACJPR,CDIQhC,GAAR,CAAYf,GCJJ,CDIR,ACJSiC,CDIb,YCJI,CAAuB,WAAvB,EAAoCsB,GAAlD,CAFqB,CAGrB;AC7B8B,AFgCpB,GAVd;AEtBkC,AFiCrC,ACHOR,IAAAA,QAAQ,CAACd,aAAT,CAAuB,OAAvB,EAAgCuB,WAAhC,CAA4CH,OAA5C;AC9B8B,AD+BjC;AC/BiC,AFmC/B,SAASnD,QAAT,CAAkBF,IAAlB,EAAwB;AEnCO,AFoClCc,ACHAkB,EDGAlB,ACHAkB,ODGO,CAACjB,ACHA,CAACkB,EDGT,CAAYjC,IAAZ,MCHA,CAAuB4C,WAAvB,EAAoCY,WAApC,CAAgDT,QAAhD;ACCH,AFGA,ACHA;;ADGA,ACDD,SAASX,kBAAT,CAA4BqB,EAA5B,EAA+B;AAC3BzB,EAAAA,QAAQ,CAACC,aAAT,CAAuBwB,EAAvB,EAA2BC,SAA3B,GAAuC,EAAvC;ADEG,ACDN,SDCe1C,MAAT,GAAiB;AACpB,SAAOvB,QAAQ,CAACwB,GAAhB;AACH;;AAED,SAASC,QAAT,GAAmB;AACf,SAAOzB,QAAQ,CAAC0B,KAAhB;AACH;;AAEM,SAASC,UAAT,GAAqB;AACxB,SAAO3B,QAAQ,CAAC4B,OAAhB;AACH;;AAEM,SAASC,aAAT,GAAwB;AAC3B,SAAO7B,QAAQ,CAAC8B,UAAhB;AACH;;AAEM,SAASC,OAAT,GAAkB;AACrB,SAAO/B,QAAQ,CAACgC,IAAhB;AACH;;AAEM,SAASC,UAAT,GAAqB;AACxB,SAAOjC,QAAQ,CAACkC,OAAhB;AACH;;AAEM,SAASC,cAAT,GAAyB;AAC5B,SAAOnC,QAAQ,CAAC0B,KAAT,CAAeU,MAAtB;AACH","file":"main.1f19ae8e.js","sourceRoot":"..","sourcesContent":["\"use strict\";\r\nconst url = \"https://foobarserver.herokuapp.com/\"\r\n\r\nconst restDbUrl = \"https://foobar-ad40.restdb.io/rest/queue\"; //RestDB url link for POSTing to queue\r\nconst restDbAPIKey = \"5fbf87774af3f9656800cf33\" //RestDB API key \r\n\r\nexport let rootData = \"\";\r\n\r\nexport function get(callback) {\r\n    fetch(url)\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n            callback(data);\r\n        });\r\n};\r\n\r\nexport function prepareData(data) {\r\n    showData(data);\r\n    rootData = data;\r\n};\r\n\r\n// POST TO DB\r\nfunction post(){\r\n    const dataToPost = {\r\n        numberOfPeople: queueLength\r\n    };\r\n\r\n    const postData = JSON.stringify(dataToPost);\r\n    fetch(restDbUrl, {\r\n        method: \"post\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json; charset=utf-8\",\r\n            \"x-apikey\": restDbAPIKey,\r\n            \"cache-control\": \"no-cache\"\r\n        },\r\n        body: postData\r\n    })\r\n        .then(res => res.json())\r\n        .then(data => console.log(data));\r\n}\r\n\r\nexport function showData(data) {\r\n    console.log(data);\r\n};\r\n\r\nexport function getBar(){\r\n    return rootData.bar;\r\n}\r\n\r\nfunction getQueue(){\r\n    return rootData.queue;\r\n}\r\n\r\nexport function getServing(){\r\n    return rootData.serving;\r\n}\r\n\r\nexport function getBartenders(){\r\n    return rootData.bartenders;\r\n}\r\n\r\nexport function getTaps(){\r\n    return rootData.taps;\r\n}\r\n\r\nexport function getStorage(){\r\n    return rootData.storage;\r\n}\r\n\r\nexport function getQueueLength(){\r\n    return rootData.queue.length;\r\n}\r\n\r\n\r\n","let extended = false;\r\n\r\nexport function init(data){\r\n    console.log(data);\r\n\r\n    if(document.querySelector(\".wrapper-storage\").classList.contains(\"extended\")){\r\n        extended = true;\r\n    } else \r\n    extended = false;\r\n\r\n    clearPreviousBeers(\".wrapper-storage\");\r\n    addBeers(data);\r\n}\r\n\r\nfunction addBeers(data){\r\n    let storageArray = data;\r\n    for(let beer of storageArray){\r\n        addBeerTemplate(\"#storage-template\", \".wrapper-storage\", beer.name, beer.amount, extended);\r\n    }\r\n}\r\n\r\nfunction addBeerTemplate(srcTemplate, destination, beerName, beerNr, extended){\r\n    const template = document.querySelector(srcTemplate).content.cloneNode(true);\r\n\r\n    template.querySelector(\".keg-amount\").textContent = beerNr;\r\n    template.querySelector(\".keg-name\").textContent = beerName;\r\n\r\n    if(extended){\r\n        template.querySelector(\".keg-amount\").classList.toggle(\"hidden\");\r\n        template.querySelector(\".kegs\").classList.toggle(\"hidden\");\r\n    }\r\n\r\n    for(let i=0;i<beerNr;i++){\r\n        let newBeer = document.createElement(\"img\");\r\n        newBeer.src = template.querySelector(\".kegs img\").src;\r\n        // newBeer.classList.add(\"beer-img\");\r\n        template.querySelector(\".kegs\").appendChild(newBeer);\r\n    }\r\n\r\n    document.querySelector(destination).appendChild(template);\r\n}\r\n\r\nfunction clearPreviousBeers(el){\r\n    document.querySelector(el).innerHTML = \"\";\r\n}\r\n","\r\nexport function init(data, data2){\r\n    console.log(data, data2);\r\n    updateBartenders(data, data2);\r\n}\r\n\r\nfunction updateBartenders(data, data2){\r\n    let bartendersArray = data;\r\n    let servingArray = data2;\r\n\r\n    for(let bartender of bartendersArray){\r\n        let bartenderNr = bartendersArray.indexOf(bartender)\r\n        let selectedBartender = document.querySelector(`#bartender_${bartendersArray.indexOf(bartender)}`);\r\n\r\n        if(bartender.status==\"WORKING\"){\r\n            selectedBartender.querySelector(\".status\").classList.remove(\"free\");\r\n        } else {\r\n            selectedBartender.querySelector(\".status\").classList.add(\"free\");\r\n        }\r\n\r\n        if(servingArray[bartenderNr]){\r\n            selectedBartender.querySelector(\".activity .serving span\").textContent = servingArray[bartenderNr].id;\r\n            selectedBartender.querySelector(\".activity .serving\").classList.remove(\"hidden\");\r\n        } else {\r\n            selectedBartender.querySelector(\".activity .serving\").classList.add(\"hidden\");\r\n        }\r\n\r\n        if(bartender.statusDetail == \"receivePayment\") {\r\n            selectedBartender.querySelector(\".activity .payment\").classList.remove(\"hidden\");\r\n        } else {\r\n            selectedBartender.querySelector(\".activity .payment\").classList.add(\"hidden\");\r\n        }\r\n\r\n        if(bartender.statusDetail == \"pourBeer\") {\r\n            selectedBartender.querySelector(\".activity .tap-paiement\").classList.remove(\"hidden\");\r\n            selectedBartender.querySelector(\".activity .tap-paiement span\").textContent = bartender.usingTap;\r\n        } else {\r\n            selectedBartender.querySelector(\".activity .tap-paiement\").classList.add(\"hidden\");\r\n        }\r\n    }\r\n}","\"use strict\";\r\n\r\nimport * as db from \"./modules/db.mjs\";\r\nimport * as storage from \"./modules/storage.mjs\";\r\nimport * as bartenders from \"./modules/bartenders.mjs\";\r\n\r\n//***IF YOU TRY TO GET DATA FROM DB AT START OF PAGE */\r\n//***IT WILL BE EMPTY BECAUSE IT TRIES TO GET DATA BEFORE FETCHING */\r\n\r\ndb.get(db.prepareData);\r\nsetTimeout(updateComponents, 100);\r\n\r\nsetInterval(() => {\r\n    db.get(db.prepareData);\r\n    updateComponents();\r\n}, 5000);\r\n\r\n\r\nfunction updateComponents() {\r\n    setTimeout(() => {\r\n        storage.init(db.getStorage());\r\n        bartenders.init(db.getBartenders(),db.getServing());\r\n    }, 100);\r\n}"]}